МІНІСТЕРСТВО ОСВІТИ І НАУКИ УКРАЇНИХАРКІВСЬКИЙ НАЦІОНАЛЬНИЙ УНІВЕРСИТЕТ РАДІОЕЛЕКТРОНІКИКАФЕДРА ПРОГРАМНОЇ ІНЖЕНЕРІЇЗвітз лабораторної роботи № 3 з дисципліниСкриптові мови програмуванняВиконала:                                                                         Перевірив:ст. гр. ПЗПІ-23-5                        				ст. викладач кафедри ПІСалогуб Андрій 						          Сокорчук Ігор ПетровичХарків 2025
1 ІСТОРІЯ ЗМІН№ДатаВерсія звітуОпис змін та виправлень122.05.20250.1Створено розділ “Історія Змін”
2 ЗАВДАННЯ     Результатом лабораторної роботи має бути робочий сайт з інтернет-магазином. Він має складатися з таких розділів:1. Сторінка товарів.2. Сторінка «Кошик».     Кожна сторінка має складатися з таких частин:1. «Шапка» сторінки,2. Тіло сторінки.3. «Підвал» або Footer сторінки.     На сторінці товарів необхідно відобразити список доступних для покупкинайменувань з можливістю вибрати кількість одиниць товарів і кнопкою«купити».     Під час натискання на кнопку «купити», має відправлятися запит(відправка форми, методом POST) на сервер, де дані зберігаються в сесію.     На сторінці «Кошик» необхідно відобразити список обраних користувачемтоварів (які були збережені у сесію).     Якщо ви ще не обрали жодного товару, то має бути відображений напис«Перейти до покупок» (посилання).
3 ОПИС ВИКОНАНОЇ РОБОТИ     Код складається з кількох файлів, які забезпечують функціональність інтернет-магазину: config.php, index.php, products.php, cart.php та checkout.php. Нижче наведено детальний опис кожного компонента.     У файлі config.php (рядки 1–151), який наведено в додатку В.1 код  відповідає за ініціалізацію бази даних, управління товарами та кошиком. Основні функції:- Ініціалізація бази даних (init_db, рядки 6–42): Створює SQLite базу даних (store.db) із таблицями products (рядки 12–18) та cart_items (рядки 20–28). Якщо таблиці відсутні, додаються початкові товари (рядки 30–38).- Отримання бази даних (get_db, рядки 44–51): Забезпечує єдиний екземпляр підключення до бази даних.- Отримання товарів (get_products, рядки 53–64): Виконує запит до таблиці products і повертає масив товарів.- Отримання елементів кошика (get_cart_items, рядки 66–86): Отримує товари кошика для поточної сесії, об'єднуючи дані з таблиць cart_items і products.- Додавання до кошика (add_to_cart, рядки 88–123): Додає товар до кошика або оновлює кількість, якщо товар уже є (рядки 103–122).- Оновлення кошика (update_cart_item, рядки 125–139): Змінює кількість товару або видаляє його, якщо кількість ≤ 0.- Підрахунок загальної суми (calculate_cart_total, рядки 141–151): Обчислює загальну вартість товарів у кошику.     Код файлу index.php (рядки 1–49), наведений в додатку В.2 відповідає за головну сторінку (вигляд сторінки наведено ра рис. Б1):- Шапка (рядки 14–32): Містить навігаційну панель із посиланнями на головну сторінку, товари та кошик. Активне посилання позначено класом nav__link--active (рядок 17).- Тіло (рядки 33–39): Відображає привітання та кнопку "Перейти до покупок" (рядок 37), яка веде на сторінку товарів.- Підвал (рядки 40–46): Містить посилання на основні розділи сайту.     Файл products.php (рядки 1–76), код якого наведено в додатку В.3 відповідає за сторінку товарів (вигляд сторінки наведено ра рис. Б2), вона обробляє відображення товарів і додавання до кошика:- Обробка POST-запиту (рядки 3–12): При натисканні кнопки "Додати" викликається add_to_cart із product_id і quantity (рядки 8–10).- Шапка (рядки 25–43): Навігаційна панель із активним посиланням на "Товари" (рядок 33).- Тіло (рядки 44–69): Відображає список товарів у вигляді форм (рядки 47–64), що містять: • Назву товару (рядок 51).• Поле для кількості (рядок 53).• Ціну (рядок 55).• Кнопку "Додати" (рядок 57).• Кнопку "Перейти до кошика" (рядок 64).- Підвал (рядки 67–73): Посилання на основні розділи.     Файл cart.php (рядки 1–110), код я кого наведено в додатку В.4 відповідає за сторінку кошика, яка відображає обрані товари або повідомлення про порожній кошик:- Обробка POST-запиту (рядки 4–9): Видаляє товари з кошика через update_cart_item (рядок 7). - Шапка (рядки 24–42): Навігаційна панель із активним посиланням на "Кошик" (рядок 37). - Тіло (рядки 43–100): • Якщо є $_SESSION['checkout_success'] (рядки 45–50), відображається повідомлення про успішне замовлення (приклад наведено на рис. Б5).• Якщо кошик не порожній (рядки 51–87) (вигляд сторінки наведено ра рис. Б3), показується таблиця з колонками: ID, назва, ціна, кількість, сума, дія (видалення, рядки 69–75). Загальна сума відображається в футері таблиці (рядки 79–86).• Якщо кошик порожній (рядки 94–98) (вигляд сторінки наведено ра рис. Б4), показується повідомлення "Ваш кошик порожній" із посиланням "Перейти до покупок".- Підвал (рядки 101–107): Посилання на основні розділи.     Файл checkout.php (рядки 1–14), код якого наведено в додатку В.5 і відповідає він за оформлення замовлення, а саме очищає кошик, видаляючи всі товари через update_cart_item (рядки 6–9), встановлює прапорець $_SESSION['checkout_success'] (рядок 11), перенаправляє на сторінку кошика (рядок 13).     
4 ВИСНОВКИ     У результаті виконання завдання було розроблено веб-сайт інтернет-магазину, який відповідає всім зазначеним вимогам:1. Реалізовано сторінки товарів і кошика з шапкою, тілом та підвалом;2. Забезпечено відображення списку товарів із можливістю вибору кількості та додавання до кошика через POST-запити;3. Використано SQLite для зберігання даних про товари та кошик, із збереженням стану кошика в сесії;4. Коректно обробляються вхідні параметри, а у випадку порожнього кошика відображається повідомлення з посиланням "Перейти до покупок".   
ДОДАТОК АВІДЕОЗАПИСВідеозапис презентації результатів лабораторної роботи: https://youtu.be/RcbS3qQ5-tAХронологічний опис відеозапису:00:00 - Вступне представлення 00:10 - Пояснення коду в файлі config.php 04:15 - Пояснення коду в файлі index.php 04:38 - Пояснення коду в файлі products.php 06:24 - Пояснення коду в файлі cart.php 08:27 - Пояснення коду в файлі checkout.php 08:48 - Демонстрація роботи сайту
ДОДАТОК БГрафічні матеріалиРисунок Б.1 — Головна сторінкаРисунок Б.2 — Сторінка товарівРисунок Б.3 — Порожній кошик Рисунок Б.4 — Кошик з товаромРисунок Б.5 — Кошик після оформлення замовлення
ДОДАТОК ВПрограмний кодВ.1 {./db/config.php}GitHub репозиторій: https://github.com/NureSalohubAndrii/smp-pzpi-23-5-salohub-andrii/blob/main/Lab3/smp-pzpi-23-5-salohub-andrii-lab3/db/config.php1   <?php3   $DB_FILE = __DIR__ . '/store.db';4   session_start();6   function init_db()7   {8       global $DB_FILE;9       $db = new SQLite3($DB_FILE);10      $result = $db->query("SELECT name FROM sqlite_master WHERE type='table' AND name='products'");11      if (!$result->fetchArray()) {12          $db->exec('13              CREATE TABLE products (14                  id INTEGER PRIMARY KEY AUTOINCREMENT,15                  name TEXT NOT NULL,16                  price DECIMAL(10,2) NOT NULL17              )18          ');20          $db->exec('21              CREATE TABLE cart_items (22                  id INTEGER PRIMARY KEY AUTOINCREMENT,23                  session_id TEXT NOT NULL,24                  product_id INTEGER NOT NULL,25                  quantity INTEGER NOT NULL DEFAULT 1,26                  FOREIGN KEY (product_id) REFERENCES products(id)27              )28          ');30          $db->exec("INSERT INTO products (name, price) VALUES31              ('Молоко пастеризоване', 12),32              ('Хліб чорний', 9),33              ('Сир білий', 21),34              ('Сметана 20%', 25),35              ('Кефір 1%', 19),36              ('Вода газована', 18),37              ('Печиво \"Весна\"', 14)38          ");39      }41      return $db;42  }44  function get_db()45  {46      static $db = null;47      if ($db === null) {48          $db = init_db();49      }50      return $db;51  }53  function get_products()54  {55      $db = get_db();56      $result = $db->query('SELECT * FROM products');58      $products = [];59      while ($row = $result->fetchArray(SQLITE3_ASSOC)) {60          $products[$row['id']] = $row;61      }63      return $products;64  }66  function get_cart_items()67  {68      $db = get_db();69      $session_id = session_id();71      $query = $db->prepare('72          SELECT c.id, c.product_id, c.quantity, p.name, p.price 73          FROM cart_items c74          JOIN products p ON c.product_id = p.id75          WHERE c.session_id = :session_id76      ');77      $query ->bindValue(':session_id', $session_id, SQLITE3_TEXT);78      $result = $stmt->execute();80      $cart_items = [];81      while ($row = $result->fetchArray(SQLITE3_ASSOC)) {82          $cart_items[] = $row;83      }85      return $cart_items;86  }88  function add_to_cart($product_id, $quantity)89  {90      $db = get_db();91      $session_id = session_id();93      $query = $db->prepare('94          SELECT id, quantity FROM cart_items 95          WHERE session_id = :session_id AND product_id = :product_id96      ');97      $query->bindValue(':session_id', $session_id, SQLITE3_TEXT);98      $query ->bindValue(':product_id', $product_id, SQLITE3_INTEGER);99      $result = $query ->execute();101     $existing_item = $result->fetchArray(SQLITE3_ASSOC);103     if ($existing_item) {104         $new_quantity = $existing_item['quantity'] + $quantity;105         $query = $db->prepare('106             UPDATE cart_items 107             SET quantity = :quantity 108             WHERE id = :id109         ');110         $query ->bindValue(':quantity', $new_quantity, SQLITE3_INTEGER);111         $query ->bindValue(':id', $existing_item['id'], SQLITE3_INTEGER);112         $query ->execute();113     } else {114         $query = $db->prepare('115             INSERT INTO cart_items (session_id, product_id, quantity)116             VALUES (:session_id, :product_id, :quantity)117         ');118         $query ->bindValue(':session_id', $session_id, SQLITE3_TEXT);119         $query ->bindValue(':product_id', $product_id, SQLITE3_INTEGER);120         $query ->bindValue(':quantity', $quantity, SQLITE3_INTEGER);121         $query ->execute();122     }123 }125 function update_cart_item($item_id, $quantity)126 {127     $db = get_db();129     if ($quantity <= 0) {130         $query = $db->prepare('DELETE FROM cart_items WHERE id = :id');131         $query ->bindValue(':id', $item_id, SQLITE3_INTEGER);132     } else {133         $query = $db->prepare('UPDATE cart_items SET quantity = :quantity WHERE id = :id');134         $query ->bindValue(':quantity', $quantity, SQLITE3_INTEGER);135         $query ->bindValue(':id', $item_id, SQLITE3_INTEGER);136     }138     $query ->execute();139 }141 function calculate_cart_total()142 {143     $cart_items = get_cart_items();144     $total = 0;146     foreach ($cart_items as $item) {147         $total += $item['price'] * $item['quantity'];148     }150     return $total;151 }В.2 {./index.php}GitHub репозиторій: https://github.com/NureSalohubAndrii/smp-pzpi-23-5-salohub-andrii/blob/main/Lab3/smp-pzpi-23-5-salohub-andrii-lab3/index.php1   <?php2   require_once './db/config.php';3   ?>4   <!DOCTYPE html>5   <html lang="uk">6   <head>7     <meta charset="UTF-8">8     <meta name="viewport" content="width=device-width, initial-scale=1.0">9     <link rel="stylesheet" href="style.css">10    <title>Магазин Весна</title>11  </head>12  <body>13    <div class="container">14      <header class="header">15        <nav class="nav">16          <div class="nav__item">17            <a href="index.php" class="nav__link nav__link--active">18                Головна19            </a>20          </div>21          <div class="nav__item">22            <a href="./pages/products.php" class="nav__link">23                Товари24            </a>25          </div>26          <div class="nav__item">27            <a href="./pages/cart.php" class="nav__link">28                Кошик29            </a>30          </div>31        </nav>32      </header>33      <main class="home-page">34        <h1>Вас вітає магазин "Весна"</h1>35        <p>Ласкаво просимо до онлайн-магазину!</p>36        <div class="home-page__buttons">37          <a href="./pages/products.php" class="btn">Перейти до покупок</a>38        </div>39      </main>40      <footer class="footer">41        <div class="footer__nav">42          <a href="index.php" class="footer__link">Головна</a> |43          <a href="./pages/products.php" class="footer__link">Товари</a> |44          <a href="./pages/cart.php" class="footer__link">Кошик</a> 45        </div>46      </footer>47    </div>48  </body>49  </html>В.3 {./pages/products.php}GitHub репозиторій: https://github.com/NureSalohubAndrii/smp-pzpi-23-5-salohub-andrii/blob/main/Lab3/smp-pzpi-23-5-salohub-andrii-lab3/pages/products.php1  <?php2  require_once '../db/config.php';3  if ($_SERVER['REQUEST_METHOD'] === 'POST') {4      if (isset($_POST['product_id']) && isset($_POST['quantity'])) {5          $product_id = (int)$_POST['product_id'];6          $quantity = (int)$_POST['quantity'];78          if ($quantity > 0) {9              add_to_cart($product_id, $quantity);10         }11     }12 }13 $products = get_products();14 ?>15 <!DOCTYPE html>16 <html lang="uk">17 <head>18   <meta charset="UTF-8">19   <meta name="viewport" content="width=device-width, initial-scale=1.0">20   <link rel="stylesheet" href="../style.css">21   <title>Магазин Весна</title>22 </head>23 <body>24   <div class="container">25     <header class="header">26       <nav class="nav">27         <div class="nav__item">28           <a href="../index.php" class="nav__link">29               Головна30           </a>31         </div>32         <div class="nav__item">33           <a href="products.php" class="nav__link nav__link--active">34               Товари35           </a>36         </div>37         <div class="nav__item">38           <a href="cart.php" class="nav__link">39               Кошик40           </a>41         </div>42       </nav>43     </header>44     <main class="products-page">45       <h1>Виберіть товари</h1>46       <div class="products-list">47         <?php foreach ($products as $product): ?>48         <div class="product-item">49           <form method="post" action="products.php">50             <input type="hidden" name="product_id" value="<?php echo $product['id']; ?>">51             <div class="product-item__name"><?php echo htmlspecialchars($product['name']); ?></div>52             <div class="product-item__quantity">53               <input type="number" name="quantity" value="1" min="1" max="99" class="product-item__quantity-input">54             </div>55             <div class="product-item__price"><?php echo number_format($product['price'], 2); ?> грн</div>56             <div class="product-item__action">57               <button type="submit" class="btn">Додати</button>58             </div>59           </form>60         </div>61         <?php endforeach; ?>62       </div>63       <div class="products-page__action-buttons">64         <a href="cart.php" class="btn">Перейти до кошика</a>65       </div>66     </main>67     <footer class="footer">68       <div class="footer__nav">69         <a href="../index.php" class="footer__link">Головна</a> |70         <a href="products.php" class="footer__link">Товари</a> |71         <a href="cart.php" class="footer__link">Кошик</a>72       </div>73     </footer>74   </div>75 </body>76 </html>В.4 {./pages/cart.php}GitHub репозиторій: https://github.com/NureSalohubAndrii/smp-pzpi-23-5-salohub-andrii/blob/main/Lab3/smp-pzpi-23-5-salohub-andrii-lab3/pages/cart.php1   <?php2   require_once '../db/config.php';4   if ($_SERVER['REQUEST_METHOD'] === 'POST') {5       if (isset($_POST['action']) && $_POST['action'] === 'remove' && isset($_POST['item_id'])) {6           $item_id = (int)$_POST['item_id'];7           update_cart_item($item_id, 0);8       }9   }11  $cart_items = get_cart_items();12  $total = calculate_cart_total();13  ?>14  <!DOCTYPE html>15  <html lang="uk">16  <head>17    <meta charset="UTF-8">18    <meta name="viewport" content="width=device-width, initial-scale=1.0">19    <link rel="stylesheet" href="../style.css">20    <title>Магазин Весна</title>21  </head>22  <body>23    <div class="container">24      <header class="header">25        <nav class="nav">26          <div class="nav__item">27            <a href="../index.php" class="nav__link">28                Головна29            </a>30          </div>31          <div class="nav__item">32            <a href="products.php" class="nav__link">33                Товари34            </a>35          </div>36          <div class="nav__item">37            <a href="cart.php" class="nav__link nav__link--active">38                Кошик39            </a>40          </div>41        </nav>42      </header>43      <main class="cart-page">44        <h1>Ваш кошик</h1>45        <?php if (isset($_SESSION['checkout_success']) && $_SESSION['checkout_success']): ?>46          <div class="cart-page__success">47            <p>Дякуємо за ваше замовлення!</p>48            <a href="products.php" class="btn">Продовжити покупки</a>49          </div>50          <?php unset($_SESSION['checkout_success']); ?>51        <?php elseif (!empty($cart_items)): ?>52          <div class="cart-table">53            <div class="cart-table__header">54              <div class="cart-table__cell">ID</div>55              <div class="cart-table__cell">Назва</div>56              <div class="cart-table__cell">Ціна</div>57              <div class="cart-table__cell">Кількість</div>58              <div class="cart-table__cell">Сума</div>59              <div class="cart-table__cell">Дія</div>60            </div>61            <?php foreach ($cart_items as $index => $item): ?>62              <div class="cart-table__row <?php echo $index % 2 === 0 ? 'cart-table__row--even' : 'cart-table__row--odd'; ?>">63                <div class="cart-table__cell"><?php echo $index + 1; ?></div>64                <div class="cart-table__cell"><?php echo htmlspecialchars($item['name']); ?></div>65                <div class="cart-table__cell"><?php echo number_format($item['price'], 2); ?></div>66                <div class="cart-table__cell"><?php echo $item['quantity']; ?></div>67                <div class="cart-table__cell"><?php echo number_format($item['price'] * $item['quantity'], 2); ?></div>68                <div class="cart-table__cell">69                  <form method="post" action="cart.php">70                    <input type="hidden" name="action" value="remove">71                    <input type="hidden" name="item_id" value="<?php echo $item['id']; ?>">72                    <button type="submit" class="btn-remove">73                      Видалити74                    </button>75                  </form>76                </div>77              </div>78            <?php endforeach; ?>79            <div class="cart-table__footer">80              <div class="cart-table__cell">Всього</div>81              <div class="cart-table__cell"></div>82              <div class="cart-table__cell"></div>83              <div class="cart-table__cell"></div>84              <div class="cart-table__cell"><?php echo number_format($total, 2); ?></div>85              <div class="cart-table__cell"></div>86            </div>87          </div>88          <div class="cart-page__actions">89            <a href="products.php" class="btn">Продовжити покупки</a>90            <form method="post" action="checkout.php">91              <button type="submit" class="btn btn--primary">Оформити замовлення</button>92            </form>93          </div>94        <?php else: ?>95          <div class="cart-page__empty">96            <p>Ваш кошик порожній</p>97            <a href="products.php" class="btn">Перейти до покупок</a>98          </div>99        <?php endif; ?>100     </main>101     <footer class="footer">102       <div class="footer__nav">103         <a href="../index.php" class="footer__link">Головна</a> |104         <a href="products.php" class="footer__link">Товари</a> |105         <a href="cart.php" class="footer__link">Кошик</a> 106       </div>107     </footer>108   </div>109 </body>110 </html>В.5 {./pages/checkout.php}GitHub репозиторій: https://github.com/NureSalohubAndrii/smp-pzpi-23-5-salohub-andrii/blob/main/Lab3/smp-pzpi-23-5-salohub-andrii-lab3/pages/checkout.php1   <?php3   require_once '../db/config.php';4   session_start();6   $cart_items = get_cart_items();7   foreach ($cart_items as $item) {8       update_cart_item($item['id'], 0);9   }11  $_SESSION['checkout_success'] = true;13  header('Location: cart.php');14  exit;2